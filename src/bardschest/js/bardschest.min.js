!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("bardschest",[],t):"object"==typeof exports?exports.bardschest=t():e.bardschest=t()}(window,function(){return function(e){var t={};function o(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,o),a.l=!0,a.exports}return o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(i,a,function(t){return e[t]}.bind(null,a));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=8)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}();var a=function(){function e(t){var o=t.audioFileUrl,i=t.audioContext,a=t.masterAudioNode;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.audioContext=i,this.audioFileUrl="./audio/"+o,this.audioNode=null,this.buffer=null,this.masterAudioNode=a}return i(e,[{key:"load",value:function(e){var t=this,o=new XMLHttpRequest;o.responseType="arraybuffer",o.onload=function(){t.createBufferFromData(o.response),e()},o.onerror=function(){e()},o.open("GET",this.audioFileUrl,!0),o.send()}},{key:"createBufferFromData",value:function(e){var t=this;this.audioContext.decodeAudioData(e,function(e){t.buffer=e})}},{key:"play",value:function(){this.audioNode=this.audioContext.createBufferSource(),this.audioNode.buffer=this.buffer,this.audioNode.connect(this.masterAudioNode),this.audioNode.start()}},{key:"stop",value:function(){this.audioNode&&2===this.audioNode.playbackState&&this.audioNode.stop(0)}}]),e}();t.default=a},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}();var a=function(){function e(t){var o=t.audioContext,i=t.color,a=void 0===i?"rgba(255, 255, 255, 1)":i,n=(t.frequency,t.radius),s=t.url,u=t.masterAudioNode;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.audioContext=o,this.color=a,this.audioNode=null,this.radius=n/2,this.url=s,this.masterAudioNode=u,this.radiusModifier=0}return i(e,[{key:"load",value:function(){}},{key:"render",value:function(e,t,o,i,a,n){var s=a*i,u=s+a;o.beginPath(),o.arc(e,t,this.radius+this.radiusModifier,s-n,u-n),o.lineWidth=10,o.shadowBlur=20,o.strokeStyle=this.color,o.shadowColor=this.color,o.shadowOffsetX=0,o.shadowOffsetY=0,o.stroke(),o.shadowBlur=0,this.radiusModifier>.01&&(this.radiusModifier=Math.max(this.radiusModifier-.15,0))}}]),e}();t.default=a},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),a=(n(o(5)),n(o(13)),n(o(7)));function n(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){var o=t.beats,i=void 0===o?1:o,a=t.bpm,n=t.masterAudioNode,s=t.position,u=void 0===s?0:s,r=t.radius,d=t.startDelay,l=void 0===d?0:d;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.beatCounter=i-l,this.beats=i,this.bpm=a,this.currentNote=null,this.duration=0,this.masterAudioNode=n,this.position=u,this.radius=r/2,this.startDelay=l,this.startTime=null,this.setStartEndTimes(a,l)}return i(e,[{key:"triggerNote",value:function(){null!==this.currentNote&&(this.currentNote.audioNode.play(),this.currentNote.radiusModifier=5)}},{key:"loopValue",value:function(e,t,o){var i=o-t,a=(e-t)%i;return a<0&&(a+=i),t+a}},{key:"getNoteForPosition",value:function(e,t){var o=2*Math.PI,i=o/e.notes.length,a=this.loopValue(t+this.position,0,o),n=Math.abs(Math.floor(a/i));return{note:e.notes[n],index:n}}},{key:"setStartEndTimes",value:function(e){this.startTime=Date.now(),this.endTime=this.startTime+(0,a.default)(e)*this.beats,this.duration=this.endTime-this.startTime}},{key:"recalculateEndTime",value:function(){this.endTime=Date.now()+(0,a.default)(this.bpm)*(this.beats-this.beatCounter+1)}},{key:"getPositionOnScreenFromAngle",value:function(e,t,o){return 0===this.position?[o.canvas.width,t]:this.position===Math.PI?[0,t]:this.position===.5*-Math.PI?[e,0]:this.position===.5*Math.PI?[e,o.canvas.height]:[0,0]}},{key:"load",value:function(){this.recalculateEndTime()}},{key:"render",value:function(e,t,o){var i=1-(this.endTime-Date.now())/this.duration,a=this.getPositionOnScreenFromAngle(e,t,o),n=0===this.position||this.position===Math.PI?e:t;o.beginPath(),o.shadowBlur=10,o.lineWidth=2,o.shadowColor="rgba(255, 244, 216, 1)",o.strokeStyle="rgba(255, 244, 216, 1)",o.arc.apply(o,function(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}(a).concat([(n-this.radius)*i,0,2*Math.PI])),o.stroke(),o.shadowBlur=0}},{key:"audioRender",value:function(e,t,o,i,a,n){var s=0;if(this.beatCounter++,this.beatCounter>this.beats){this.beatCounter=1;var u=this.getNoteForPosition(e,i);this.currentNote=u.note,e.unlockPattern[o.length]===u.index?(o.push(u.index),n(1),s=10*e.multiplier,e.multiplier+=1):(s-=10,e.multiplier=1,o.pop()),a(e.unlockPattern,o,e.notes),this.currentNote&&(this.triggerNote(),++t>=e.unlockPattern.length&&(t=0)),this.setStartEndTimes(this.bpm)}return{score:s,sectionProgress:t}}}]),e}();t.default=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(o(0));var n=function(){function e(t){var o=t.audioContext,i=t.bpm,a=t.GameState,n=t.masterAudioNode,s=t.radius,u=t.sections;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.audioContext=o,this.bpm=i,this.GameState=a,this.masterAudioNode=n,this.radius=s,this.sections=u,this.isLoaded=!1,this.notes={}}return i(e,[{key:"testIsLoaded",value:function(){this.sections.every(function(e){return null!==e.audioNode&&e.notes.every(function(e){return null!==e.audioNode})})&&(this.isLoaded=!0)}},{key:"load",value:function(){var e=this;this.sections.forEach(function(t){t.audioNode=new a.default({audioContext:e.audioContext,audioFileUrl:t.url,masterAudioNode:e.masterAudioNode}),t.audioNode.load(e.testIsLoaded.bind(e)),t.notes.forEach(function(t){t.url in e.notes?(t=e.notes[t.url],e.testIsLoaded.bind(e)):(t.audioNode=new a.default({audioContext:e.audioContext,audioFileUrl:t.url,masterAudioNode:e.masterAudioNode}),t.audioNode.load(e.testIsLoaded.bind(e)),e.notes[t.url]=t)})})}}]),e}();t.default=n},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),a=n(o(1));n(o(2));function n(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){var o=t.audioContext,i=t.beats,n=t.beatCounter,s=t.bpm,u=t.buffer,r=void 0===u?null:u,d=t.masterAudioNode,l=t.radius,c=t.notes,m=void 0===c?[new a.default({audioContext:o,color:"red",frequency:88,radius:l}),new a.default({audioContext:o,color:"orange",frequency:98.776,radius:l}),new a.default({audioContext:o,color:"yellow",frequency:104.65,radius:l}),new a.default({audioContext:o,color:"green",frequency:117.466,radius:l}),new a.default({audioContext:o,color:"blue",frequency:131.85,radius:l}),new a.default({audioContext:o,color:"indigo",frequency:139.692,radius:l})]:c,h=t.noteTriggers,f=t.unlockPattern,p=void 0===f?[0,1,2,3,4,5]:f,b=t.url,v=void 0===b?"metronome-100-bpm.ogg":b;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.audioContext=o,this.audioNode=null,this.beatCounter=n,this.beats=i,this.bpm=s,this.buffer=r,this.masterAudioNode=d,this.notes=m,this.noteTriggers=h,this.radius=l,this.unlockPattern=p,this.url=v,this.multiplier=1}return i(e,[{key:"load",value:function(){}}]),e}();t.default=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e.length!==t.length)return!1;for(var o=e.length;o--;)if(e[o]!==t[o])return!1;return!0}},function(e,t,o){"use strict";function i(e,t,o,i){var a,n=0;return"boolean"!=typeof t&&(i=o,o=t,t=void 0),function(){var s=this,u=Number(new Date)-n,r=arguments;function d(){n=Number(new Date),o.apply(s,r)}i&&!a&&d(),a&&clearTimeout(a),void 0===i&&u>e?d():!0!==t&&(a=setTimeout(i?function(){a=void 0}:d,void 0===i?e-u:e))}}Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=i,t.debounce=function(e,t,o){return void 0===o?i(e,t,!1):i(e,o,!1!==t)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return 6e4/e}},function(e,t,o){"use strict";var i=s(o(9)),a=s(o(16)),n=s(o(17));function s(e){return e&&e.__esModule?e:{default:e}}var u={GameState:a.default,Game:i.default,UI:n.default};document.addEventListener("DOMContentLoaded",function(e){!function(){var e=new u.GameState;e.Game=new u.Game(e),e.UI=new u.UI(e),e.UI.init()}()})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),a=c(o(5)),n=c(o(10)),s=(c(o(11)),c(o(7))),u=o(6),r=c(o(12)),d=c(o(14)),l=c(o(15));function c(e){return e&&e.__esModule?e:{default:e}}var m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.GameState=t,this.audioContext=null,this.canvas=null,this.ctx=null,this.drag=.1,this.fullCircleRadian=2*Math.PI,this.glowAlpha=0,this.isPaused=!1,this.level=null,this.levels=[],this.levelProgress=0,this.mass=8e3,this.masterAudioNode=null,this.momentum=0,this.rotation=0,this.sectionKey=[],this.section=null,this.sectionProgress=0,this.deltaTime=0,this.lastUpdate=Date.now(),this.isRunning=!1,this.isFirstBeat=!0,this.images={center:{url:"./img/center.png",image:null},centerGlow:{url:"./img/centerGlow.png",image:null}},this.setDimensions(),this.radius=Math.sqrt(this.width/2*(this.width/2)+this.height/2*(this.height/2))/3,this.initCanvas(),this.initAudio(),this.initControls(),this.loadImages(),this.importLevels()}return i(e,[{key:"play",value:function(){this.loadLevel(),this.startRenderLoops(),this.momentum+=5e3*this.deltaTime,this.isPaused&&this.togglePause()}},{key:"restart",value:function(){1==confirm("Are you sure you want to exit the level?")&&(this.endlevel(),this.GameState.UI.setScreen("level"))}},{key:"togglePause",value:function(){this.isPaused=!this.isPaused,this.isPaused||(this.audioContext.resume(),this.section.noteTriggers.forEach(function(e){return e.recalculateEndTime()})),this.isPaused&&this.audioContext.suspend()}},{key:"getAudioRenderFrequency",value:function(){return null===this.level?500:(0,s.default)(this.level.bpm)}},{key:"resizeCanvas",value:function(){var e=this;this.setDimensions(),this.canvas.width=this.width,this.canvas.height=this.height,this.cx=this.width/2,this.cy=this.height/2,this.radius=Math.sqrt(this.width/2*(this.width/2)+this.height/2*(this.height/2))/3,this.levels.forEach(function(t){t.radius=e.radius,t.sections.forEach(function(t){t.noteTriggers.forEach(function(t){return t.radius=e.radius/2}),t.notes.forEach(function(t){return t.radius=e.radius/2})})})}},{key:"physics",value:function(){this.rotation+=this.momentum/this.mass,this.momentum=this.momentum-this.momentum*this.drag}},{key:"calculateDeltaTime",value:function(){var e=Date.now();this.deltaTime=e-this.lastUpdate,this.lastUpdate=e}},{key:"drawGameObjects",value:function(){null!==this.images.center.image&&(this.ctx.translate(this.cx,this.cy),this.ctx.rotate(-this.rotation),this.ctx.drawImage(this.images.center.image,-this.radius/2,-this.radius/2,this.radius,this.radius),this.ctx.rotate(this.rotation),this.ctx.translate(-this.cx,-this.cy)),null!==this.images.centerGlow.image&&this.glowAlpha>.01&&(this.glowAlpha=Math.max(this.glowAlpha-.01,0),this.ctx.globalAlpha=this.glowAlpha,this.ctx.translate(this.cx,this.cy),this.ctx.rotate(-this.rotation),this.ctx.drawImage(this.images.centerGlow.image,-this.radius/2,-this.radius/2,this.radius,this.radius),this.ctx.rotate(this.rotation),this.ctx.translate(-this.cx,-this.cy),this.ctx.globalAlpha=1)}},{key:"triggerCenterGlow",value:function(e){this.glowAlpha=e}},{key:"winCondition",value:function(){return this.levelProgress>=this.level.sections.length&&(this.endlevel(),this.GameState.UI.setScreen("score"),!0)}},{key:"sectionCompleteCondition",value:function(){(0,a.default)(this.sectionKey,this.section.unlockPattern)&&(this.sectionKey=[],this.sectionProgress=0,this.levelProgress++,this.GameState.UI.updateLevel(this.level),this.loadSection())}},{key:"endlevel",value:function(){this.section.audioNode.stop(),this.section=null,this.level=null,this.isFirstBeat=!0,this.isRunning=!1,this.isPaused=!0,this.GameState.score=0,this.momentum+=5e3*this.deltaTime,this.sectionProgress=0,this.levelProgress=0,this.score=0,this.levels=[],this.importLevels()}},{key:"importLevels",value:function(){this.levels.push((0,r.default)({audioContext:this.audioContext,GameState:this.GameState,masterAudioNode:this.masterAudioNode,radius:this.radius}),(0,d.default)({audioContext:this.audioContext,GameState:this.GameState,masterAudioNode:this.masterAudioNode,radius:this.radius}),(0,l.default)({audioContext:this.audioContext,GameState:this.GameState,masterAudioNode:this.masterAudioNode,radius:this.radius}))}},{key:"initCanvas",value:function(){var e=this,t=document.querySelector("canvas");t.width=this.width,t.height=this.height;var o=t.getContext("2d");this.cx=this.width/2,this.cy=this.height/2,this.canvas=t,this.ctx=o,window.addEventListener("resize",(0,u.throttle)(200,function(){e.setDimensions(),e.resizeCanvas()}))}},{key:"setDimensions",value:function(){this.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,this.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},{key:"initAudio",value:function(){var e=new(window.AudioContext||window.webkitAudioContext);this.audioContext=e;var t=e.createGain();t.gain.value=.75,t.connect(e.destination),this.masterAudioNode=t}},{key:"initControls",value:function(){this.control=new n.default(this),this.control.init()}},{key:"startRenderLoops",value:function(){this.isRunning||(this.isRunning=!0,this.audioRender(),this.render())}},{key:"loadImages",value:function(){var e=this;Object.keys(this.images).forEach(function(t){var o=new Image;o.src=e.images[t].url,o.onload=function(){e.images[t].image=o}})}},{key:"loadLevel",value:function(){this.level=this.levels[this.GameState.level],this.GameState.UI.updateBPM(this.level.bpm),this.level.load(),this.loadSection()}},{key:"loadSection",value:function(){this.section&&this.section.audioNode.stop(),this.levelProgress<this.level.sections.length&&(this.section=this.level.sections[this.levelProgress]),this.section.load(),this.section.noteTriggers.forEach(function(e){return e.load()}),this.section.notes.forEach(function(e){return e.load()}),this.sectionSubtention=this.fullCircleRadian/this.section.notes.length,this.GameState.UI.updateIndicators(this.section.unlockPattern,this.sectionKey,this.section.notes)}},{key:"shouldRenderGameplay",value:function(){return!this.isPaused&&null!==this.level&&!0===this.level.isLoaded&&this.section}},{key:"render",value:function(){var e=this;this.isRunning&&window.requestAnimationFrame(this.render.bind(this)),this.shouldRenderGameplay()&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.calculateDeltaTime(),this.physics(),this.drawGameObjects(),this.control.handlePressedKeys(),this.section.notes.forEach(function(t,o){t.render(e.cx,e.cy,e.ctx,o,e.sectionSubtention,e.rotation)}),this.section.noteTriggers.forEach(function(t){t.render(e.cx,e.cy,e.ctx)}))}},{key:"audioRender",value:function(){var e=this;(this.isRunning&&setTimeout(this.audioRender.bind(this),this.getAudioRenderFrequency()),this.shouldRenderGameplay())&&(this.section.noteTriggers.forEach(function(t){var o=t.audioRender(e.section,e.sectionProgress,e.sectionKey,e.rotation,e.GameState.UI.updateIndicators,e.triggerCenterGlow.bind(e));e.sectionProgress=o.sectionProgress,e.GameState.score=Math.max(0,e.GameState.score+o.score*e.level.difficulty),e.GameState.UI.updateScoreAdd(o.score*e.level.difficulty)}),this.GameState.UI.updateScore(this.GameState.score),this.sectionCompleteCondition(),this.winCondition()||(this.section.beatCounter++,this.section.beatCounter>this.section.beats&&(this.section.audioNode.play(),this.section.beatCounter=1),this.isFirstBeat&&(this.section.noteTriggers.forEach(function(e){return e.recalculateEndTime()}),this.isFirstBeat=!1)))}}]),e}();t.default=m},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),a=o(6);var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.direction=1,this.Game=t,this.isMouseDown=!1,this.oldMousePos=0,this.pressedKeys=[],this.rotationSpeed=6,this.debounceValue=10}return i(e,[{key:"init",value:function(){var e=this,t=(0,a.throttle)(this.debounceValue,function(t){return e.handleMouseMove(t)});document.addEventListener("mousemove",t),document.addEventListener("mousedown",function(t){e.isMouseDown=!0,e.oldMousePos=t.clientX,e.direction=t.clientY>e.Game.ctx.canvas.height/2?-1:1}),document.addEventListener("mouseup",function(t){e.isMouseDown=!1});var o=(0,a.throttle)(this.debounceValue,function(t){return e.handleTouchMove(t)});document.addEventListener("touchmove",o),document.addEventListener("touchstart",function(t){e.isMouseDown=!0,e.oldMousePos=t.targetTouches[0].clientX,e.direction=t.targetTouches[0].clientY>e.Game.ctx.canvas.height/2?-1:1}),document.addEventListener("touchend",function(t){e.isMouseDown=!1}),document.onkeydown=this.handleKeyDown.bind(this),document.onkeyup=this.handleKeyUp.bind(this)}},{key:"handleTouchMove",value:function(e){if(e.preventDefault(),this.isMouseDown&&!this.Game.isPaused)for(var t=0;t<e.targetTouches.length;t++)this.Game.momentum+=(this.oldMousePos-e.targetTouches[t].clientX)*this.direction*this.Game.deltaTime,this.oldMousePos=e.targetTouches[t].clientX}},{key:"handleMouseMove",value:function(e){this.isMouseDown&&!this.Game.isPaused&&(this.Game.momentum+=(this.oldMousePos-e.clientX)*this.direction*this.Game.deltaTime,this.oldMousePos=e.clientX)}},{key:"handleKeyDown",value:function(e){this.pressedKeys.includes(e.keyCode)||this.pressedKeys.push(e.keyCode)}},{key:"handleKeyUp",value:function(e){var t=this.pressedKeys.indexOf(e.keyCode);t>-1&&this.pressedKeys.splice(t,1)}},{key:"handlePressedKeys",value:function(){this.pressedKeys.includes(37)&&(this.Game.momentum+=this.rotationSpeed*this.Game.deltaTime),this.pressedKeys.includes(39)&&(this.Game.momentum-=this.rotationSpeed*this.Game.deltaTime)}}]),e}();t.default=n},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){window.setTimeout(e,0)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});u(o(0));var i=u(o(3)),a=u(o(1)),n=u(o(2)),s=u(o(4));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=new i.default(e);t.bpm=110,t.name="Brave The Storm",t.difficulty=1;var o=[new a.default({audioContext:t.audioContext,color:"red",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"level-1/note-1.mp3"}),new a.default({audioContext:t.audioContext,color:"orange",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"level-1/note-2.mp3"}),new a.default({audioContext:t.audioContext,color:"yellow",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"level-1/note-3.mp3"}),new a.default({audioContext:t.audioContext,color:"blue",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"level-1/note-4.mp3"})],u=[new n.default({beats:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:0,radius:t.radius,startDelay:0}),new n.default({beats:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:Math.PI,radius:t.radius,startDelay:8}),new n.default({beats:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:0,radius:t.radius,startDelay:16}),new n.default({beats:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:Math.PI,radius:t.radius,startDelay:24})],r=[new n.default({beats:16,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:0,radius:t.radius,startDelay:0}),new n.default({beats:16,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:Math.PI,radius:t.radius,startDelay:4}),new n.default({beats:16,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:0,radius:t.radius,startDelay:8}),new n.default({beats:16,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:Math.PI,radius:t.radius,startDelay:12})],d=[new n.default({beats:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:0,radius:t.radius,startDelay:0}),new n.default({beats:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*Math.PI,radius:t.radius,startDelay:8}),new n.default({beats:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:Math.PI,radius:t.radius,startDelay:16}),new n.default({beats:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*-Math.PI,radius:t.radius,startDelay:24})];return t.sections=[new s.default({audioContext:t.audioContext,beats:16,beatCounter:16,bpm:t.bpm,masterAudioNode:t.masterAudioNode,unlockPattern:[0,0],url:"",notes:[new a.default({audioContext:t.audioContext,color:"#fff5bf",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"click.mp3"})],noteTriggers:u}),new s.default({audioContext:t.audioContext,beats:32,beatCounter:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,unlockPattern:[2,1,3,0],url:"level-1/bg-1.mp3",notes:o,noteTriggers:u}),new s.default({audioContext:t.audioContext,beats:32,beatCounter:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,unlockPattern:[1,2,0,3],url:"level-1/bg-2.mp3",notes:o,noteTriggers:d}),new s.default({audioContext:t.audioContext,beats:32,beatCounter:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,unlockPattern:[1,0,2,3],url:"level-1/bg-3.mp3",notes:o,noteTriggers:r}),new s.default({audioContext:t.audioContext,beats:32,beatCounter:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,unlockPattern:[1,3,0,2,0,3],url:"level-1/bg-4.mp3",notes:o,noteTriggers:r}),new s.default({audioContext:t.audioContext,beats:32,beatCounter:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,unlockPattern:[3,0,2,0,1,0],url:"level-1/bg-5.mp3",notes:o,noteTriggers:r})],t}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,o){return e*(1-o)+t*o}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});u(o(0));var i=u(o(3)),a=u(o(1)),n=u(o(2)),s=u(o(4));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=new i.default(e);t.bpm=120,t.name="Open The Gates",t.difficulty=3;var o=[new a.default({audioContext:t.audioContext,color:"red",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"level-2/note-1.mp3"}),new a.default({audioContext:t.audioContext,color:"orange",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"level-2/note-2.mp3"}),new a.default({audioContext:t.audioContext,color:"yellow",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"level-2/note-3.mp3"}),new a.default({audioContext:t.audioContext,color:"green",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"level-2/note-4.mp3"}),new a.default({audioContext:t.audioContext,color:"blue",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"level-2/note-5.mp3"}),new a.default({audioContext:t.audioContext,color:"indigo",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"level-2/note-6.mp3"}),new a.default({audioContext:t.audioContext,color:"violet",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"level-2/note-7.mp3"})],u=[new n.default({beats:16,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*Math.PI,radius:t.radius,startDelay:0}),new n.default({beats:16,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*-Math.PI,radius:t.radius,startDelay:4}),new n.default({beats:16,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*Math.PI,radius:t.radius,startDelay:8}),new n.default({beats:16,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*-Math.PI,radius:t.radius,startDelay:12})],r=[new n.default({beats:16,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:Math.PI,radius:t.radius,startDelay:0}),new n.default({beats:16,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*-Math.PI,radius:t.radius,startDelay:8}),new n.default({beats:16,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:0,radius:t.radius,startDelay:0})],d=[new n.default({beats:16,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:0,radius:t.radius,startDelay:0}),new n.default({beats:16,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*Math.PI,radius:t.radius,startDelay:4}),new n.default({beats:16,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:Math.PI,radius:t.radius,startDelay:8}),new n.default({beats:16,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*-Math.PI,radius:t.radius,startDelay:12})];return t.sections=[new s.default({audioContext:t.audioContext,beats:16,beatCounter:16,bpm:t.bpm,masterAudioNode:t.masterAudioNode,unlockPattern:[0,0],url:"",notes:[new a.default({audioContext:t.audioContext,color:"#fff5bf",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"click.mp3"})],noteTriggers:u}),new s.default({audioContext:t.audioContext,beats:32,beatCounter:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,unlockPattern:[0,1,2,3],url:"level-2/bg-1.mp3",notes:o,noteTriggers:u}),new s.default({audioContext:t.audioContext,beats:32,beatCounter:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,unlockPattern:[4,5,6,0],url:"level-2/bg-2.mp3",notes:o,noteTriggers:u}),new s.default({audioContext:t.audioContext,beats:32,beatCounter:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,unlockPattern:[2,1,4,3,2,5],url:"level-2/bg-3.mp3",notes:o,noteTriggers:r}),new s.default({audioContext:t.audioContext,beats:32,beatCounter:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,unlockPattern:[0,2,4,6,1,2,3,0],url:"level-2/bg-4.mp3",notes:o,noteTriggers:d}),new s.default({audioContext:t.audioContext,beats:32,beatCounter:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,unlockPattern:[1,3,5,6,0,2,4,1],url:"level-2/bg-4.mp3",notes:o,noteTriggers:u})],t}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});u(o(0));var i=u(o(3)),a=u(o(1)),n=u(o(2)),s=u(o(4));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=new i.default(e);t.bpm=130,t.name="Wind The Clock",t.difficulty=5;var o=[new a.default({audioContext:t.audioContext,color:"red",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"level-3/note-1.mp3"}),new a.default({audioContext:t.audioContext,color:"orange",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"level-3/note-2.mp3"}),new a.default({audioContext:t.audioContext,color:"yellow",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"level-3/note-3.mp3"}),new a.default({audioContext:t.audioContext,color:"green",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"level-3/note-4.mp3"}),new a.default({audioContext:t.audioContext,color:"blue",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"level-3/note-5.mp3"}),new a.default({audioContext:t.audioContext,color:"indigo",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"level-3/note-6.mp3"}),new a.default({audioContext:t.audioContext,color:"violet",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"level-3/note-7.mp3"}),new a.default({audioContext:t.audioContext,color:"skyblue",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"level-3/note-8.mp3"})],u=[new n.default({beats:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:0,radius:t.radius,startDelay:0}),new n.default({beats:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*Math.PI,radius:t.radius,startDelay:4}),new n.default({beats:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:Math.PI,radius:t.radius,startDelay:8}),new n.default({beats:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*-Math.PI,radius:t.radius,startDelay:12}),new n.default({beats:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:0,radius:t.radius,startDelay:16}),new n.default({beats:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*Math.PI,radius:t.radius,startDelay:20}),new n.default({beats:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:Math.PI,radius:t.radius,startDelay:24}),new n.default({beats:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*-Math.PI,radius:t.radius,startDelay:28})],r=[new n.default({beats:4,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*Math.PI,radius:t.radius,startDelay:0}),new n.default({beats:4,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*-Math.PI,radius:t.radius,startDelay:1}),new n.default({beats:4,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*Math.PI,radius:t.radius,startDelay:2}),new n.default({beats:4,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*-Math.PI,radius:t.radius,startDelay:3})],d=[new n.default({beats:4,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:0,radius:t.radius,startDelay:0}),new n.default({beats:4,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:Math.PI,radius:t.radius,startDelay:1}),new n.default({beats:4,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:0,radius:t.radius,startDelay:2}),new n.default({beats:4,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:Math.PI,radius:t.radius,startDelay:3})],l=[new n.default({beats:8,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:0,radius:t.radius,startDelay:0}),new n.default({beats:8,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*Math.PI,radius:t.radius,startDelay:1}),new n.default({beats:8,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:Math.PI,radius:t.radius,startDelay:2}),new n.default({beats:8,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*-Math.PI,radius:t.radius,startDelay:3}),new n.default({beats:8,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:0,radius:t.radius,startDelay:4}),new n.default({beats:8,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*Math.PI,radius:t.radius,startDelay:5}),new n.default({beats:8,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:Math.PI,radius:t.radius,startDelay:6}),new n.default({beats:8,bpm:t.bpm,masterAudioNode:t.masterAudioNode,position:.5*-Math.PI,radius:t.radius,startDelay:7})];return t.sections=[new s.default({audioContext:t.audioContext,beats:32,beatCounter:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,unlockPattern:[0,0,0,0],url:"",notes:[new a.default({audioContext:t.audioContext,color:"#fff5bf",masterAudioNode:t.masterAudioNode,radius:t.radius,url:"click.mp3"})],noteTriggers:u}),new s.default({audioContext:t.audioContext,beats:32,beatCounter:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,unlockPattern:[0,1,2,3],url:"level-3/bg-1.mp3",notes:o,noteTriggers:u}),new s.default({audioContext:t.audioContext,beats:32,beatCounter:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,unlockPattern:[4,0,2,6],url:"level-3/bg-2.mp3",notes:o,noteTriggers:u}),new s.default({audioContext:t.audioContext,beats:32,beatCounter:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,unlockPattern:[0,4,2,6],url:"level-3/bg-3.mp3",notes:o,noteTriggers:r}),new s.default({audioContext:t.audioContext,beats:32,beatCounter:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,unlockPattern:[2,6,3,7],url:"level-3/bg-4.mp3",notes:o,noteTriggers:d}),new s.default({audioContext:t.audioContext,beats:32,beatCounter:32,bpm:t.bpm,masterAudioNode:t.masterAudioNode,unlockPattern:[0,2,4,6,1,3,5,7],url:"level-3/bg-4.mp3",notes:o,noteTriggers:l})],t}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.level=0,this.score=0}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}();var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.GameState=t,this.screens=document.querySelectorAll(".Screen"),this.buttons={mute:document.querySelectorAll('[data-nav="mute"]'),quit:document.querySelectorAll('[data-nav="quit"]'),transitions:document.querySelectorAll("[data-target-screen]"),play:document.querySelectorAll("[data-gamestate-play]"),pause:document.querySelectorAll("[data-gamestate-pause]"),restart:document.querySelectorAll("[data-gamestate-restart]"),fullscreen:document.querySelectorAll('[data-nav="fullscreen"]'),level:document.querySelectorAll("[data-gamestate-change-level]")},this.isFullscreen=!1}return i(e,[{key:"init",value:function(){this.initListenters(),this.setScreen("mainmenu")}},{key:"initListenters",value:function(){var e=this;Array.from(this.buttons.play).forEach(function(t){t.addEventListener("click",function(){return e.GameState.Game.play()})}),Array.from(this.buttons.pause).forEach(function(t){t.addEventListener("click",function(){return e.GameState.Game.togglePause()})}),Array.from(this.buttons.restart).forEach(function(t){t.addEventListener("click",function(){return e.GameState.Game.restart()})}),Array.from(this.buttons.fullscreen).forEach(function(t){t.addEventListener("click",function(){return e.toggleFullscreen()})}),Array.from(this.buttons.level).forEach(function(t){t.addEventListener("click",function(t){e.GameState.level+=parseInt(t.target.dataset.gamestateChangeLevel,10),e.GameState.level>=e.GameState.Game.levels.length&&(e.GameState.level=0),e.GameState.level<0&&(e.GameState.level=e.GameState.Game.levels.length),e.updateLevel(e.GameState.Game.levels[e.GameState.level])})}),Array.from(this.buttons.quit).forEach(function(e){e.addEventListener("click",function(){return window.close()})}),Array.from(this.buttons.mute).forEach(function(t){t.addEventListener("click",function(t){var o=e.GameState.Game.audioContext;"running"===o.state?o.suspend().then(function(){t.target.innerHTML="Resume"}):"suspended"===o.state&&o.resume().then(function(){t.target.innerHTML="Mute"})})}),Array.from(this.buttons.transitions).forEach(function(t){t.addEventListener("click",e.initTransitions.bind(e))})}},{key:"initTransitions",value:function(e){this.setScreen(e.target.dataset.targetScreen)}},{key:"setScreen",value:function(e){Array.from(this.screens).forEach(function(t){t.dataset.screen===e?t.classList.add("active"):t.classList.remove("active")})}},{key:"toggleFullscreen",value:function(){var e=document.documentElement;this.isFullscreen||(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()),this.isFullscreen&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()),this.isFullscreen=!this.isFullscreen}},{key:"updateScore",value:function(e){var t=document.querySelectorAll('[data-ui="score"]');Array.from(t).forEach(function(t){t.innerHTML=e})}},{key:"updateLevel",value:function(e){Array.from(document.querySelectorAll('[data-ui="level"]')).forEach(function(t){t.innerHTML=e.name});for(var t=document.querySelector('[data-ui="levelDifficulty"]'),o=1;o<6;o++)t.classList.remove("difficulty-"+o);t.classList.add("difficulty-"+e.difficulty)}},{key:"updateBPM",value:function(e){document.querySelector('[data-ui="bpm"]').innerHTML=e}},{key:"updateIndicators",value:function(e,t,o){var i=document.querySelector(".Indicators");e.length;i.innerHTML="",e.forEach(function(e,a){var n=document.createElement("div");n.classList.add("Indicator"),n.style.backgroundColor=o[e].color,t[a]!==e&&(n.style.opacity=.35),i.appendChild(n)})}},{key:"updateScoreAdd",value:function(e){if(0!==e){var t=document.querySelectorAll("[data-score-addition]");Array.from(t).forEach(function(t){t.classList.remove("negative"),t.innerHTML=e,t.classList.add("active"),e<0&&t.classList.add("negative"),setTimeout(function(){t.classList.remove("active")},100)})}}}]),e}();t.default=a}])});